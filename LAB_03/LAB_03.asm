ORG 0000H
		MOV P2,#0FFH
K1:     MOV P1,#0
		MOV A,P2
		ANL A,#00001111B
		CJNE A, #00001111B,K1		
K2:	ACALL DELAY
		MOV A,P2
		ANL A,#00001111B
		CJNE A,#00001111B,OVER
		SJMP K2	
OVER:	ACALL DELAY
		MOV A,P2
		ANL A,#00001111B
		CJNE A,#00001111B,OVER1
		SJMP K2	
OVER1: 	MOV P1,#11111110B
		MOV A,P2
		ANL A,#00001111B
		CJNE A,#00001111B,ROW_0
		
		MOV P1,#11111101B
		MOV A,P2
		ANL A,#00001111B
		CJNE A,#00001111B,ROW_1
		
		MOV P1,#11111011B
		MOV A,P2
		ANL A,#00001111B
		CJNE A,#00001111B,ROW_2
		
		MOV P1,#11110111B
		MOV A,P2
		ANL A,#00001111B
		CJNE A,#00001111B,ROW_3
		
		LJMP K2
		
ROW_0: 	MOV DPTR,#CODE1
		SJMP FIND
		
ROW_1: 	MOV DPTR,#CODE2
		SJMP FIND
		
ROW_2: 	MOV DPTR,#CODE3
		SJMP FIND
		
ROW_3: 	MOV DPTR,#CODE4
		SJMP FIND
		
FIND:	RRC A
		JNC MATCH
		INC DPTR
		SJMP FIND
		
MATCH:  CLR A
		MOVC A,@A+DPTR
		MOV P3,A
		LJMP K1
		
DELAY:	MOV R2,#0FFH
LOOP:	DJNZ R2,LOOP
		RET
		
ORG 300H

CODE1: DB '1','2','3'
CODE2: DB '4','5','6'
CODE3: DB '7','8','9'
CODE4: DB '*','0','#'
		END
		
		